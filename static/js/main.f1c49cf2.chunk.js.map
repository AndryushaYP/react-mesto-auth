{"version":3,"sources":["images/Union.svg","images/Fail.svg","images/logo.svg","components/ProtectedRoute.js","contexts/CurrentUserContext.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/AddPlacePopup.js","components/EditAvatarPopup.js","components/InfoTooltip.js","components/Header.js","components/Card.js","components/Main.js","components/Footer.js","components/ImagePopup.js","components/Login.js","components/Register.js","utils/Api.js","utils/auth.js","components/App.js","index.js"],"names":["module","exports","ProtectedRoute","Component","component","props","path","loggedIn","to","CurrentUserContext","React","createContext","PopupWithForm","title","name","btnValue","children","isOpen","onClose","onSubmit","className","action","method","noValidate","type","value","onClick","EditProfilePopup","onUpdateUser","useState","setName","description","setDescription","currentUser","useContext","useEffect","about","e","preventDefault","defaultValue","onChange","target","placeholder","minLength","maxLength","required","id","AddPlacePopup","onAddPlace","nameRef","useRef","linkRef","link","current","ref","EditAvatarPopup","onUpdateAvatar","urlRef","avatar","InfoTooltip","sucess","message","src","successImage","failImage","alt","Header","email","onSignOut","logo","Card","onCardDelete","onCardLike","onCardClick","card","isOwn","owner","_id","isLiked","likes","some","i","length","Main","onEditProfile","onEditAvatar","cards","map","key","Footer","ImagePopup","Login","onLogin","password","data","setData","handleChange","Register","onRegister","api","config","this","_url","url","_headers","headers","fetch","then","res","ok","json","Promise","reject","status","body","JSON","stringify","authorization","BASE_URL","App","setLoggedIn","userData","setUserData","setEmail","history","useHistory","tokenCheck","token","jwt","localStorage","getItem","Accept","console","log","infoTooltipOpen","setInfoTooltipOpen","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","selectedCard","setSelectedCard","setCurrentUser","setCards","closeAllPopup","all","getUserData","getAllCardsList","dataUser","cardData","item","cardEl","catch","err","removeItem","push","Provider","changeLikeCard","newCard","newCards","cardItem","deleteCard","newCardArr","filter","auth","setItem","finally","changeUserData","clearForm","addCard","changeUserAvatar","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.f1c49cf2.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/Union.e38b395c.svg\";","module.exports = __webpack_public_path__ + \"static/media/Fail.4072126c.svg\";","module.exports = __webpack_public_path__ + \"static/media/logo.c6f11019.svg\";","import React from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n\r\nconst ProtectedRoute = ({ component: Component, ...props }) => {\r\n  return (\r\n    <Route path={props.path}>\r\n      {() => (props.loggedIn ? <Component {...props} /> : <Redirect to=\"./signin\" />)}\r\n    </Route>\r\n  );\r\n};\r\n\r\nexport default ProtectedRoute;\r\n","import React from 'react';\r\nexport const CurrentUserContext = React.createContext();","import React from \"react\";\n\nexport default function PopupWithForm({\n  title,\n  name,\n  btnValue,\n  children,\n  isOpen,\n  onClose,\n  onSubmit,\n}) {\n\n  return (\n    <div className={`popup popup_type_${name} ${isOpen && \"popup_opened\"}`}>\n      <form\n        onSubmit={onSubmit}\n        name={name}\n        action=\"#\"\n        method=\"POST\"\n        className={`popup__form popup__form_type_${name}`}\n        noValidate\n      >\n        <h2 className=\"popup__title\">{title}</h2>\n\n        {children}\n\n        <button type=\"submit\" value=\"\" className=\"popup__button\">\n          {btnValue}\n        </button>\n        <button type=\"reset\" className=\"popup__button-close\" onClick={onClose}></button>\n      </form>\n    </div>\n  );\n}\n","import React from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\n\r\nexport default function EditProfilePopup({ isOpen, onClose, onUpdateUser }) {\r\n  const [name, setName] = React.useState(\"\");\r\n  const [description, setDescription] = React.useState(\"\");\r\n\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  React.useEffect(() => {\r\n    setName(currentUser.name);\r\n    setDescription(currentUser.about);\r\n  }, [currentUser]);\r\n\r\n  function handleChangeName(e) {\r\n    setName(e.target.value);\r\n  }\r\n\r\n  function handleChangeDescription(e) {\r\n    setDescription(e.target.value);\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    // Запрещаем браузеру переходить по адресу формы\r\n    e.preventDefault();\r\n\r\n    // Передаём значения управляемых компонентов во внешний обработчик\r\n    onUpdateUser({\r\n      name,\r\n      about: description,\r\n    });\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      onSubmit={handleSubmit}\r\n      title={\"Редактировать профиль\"}\r\n      name={\"edit\"}\r\n      btnValue={\"Сохранить\"}\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n    >\r\n      <label className=\"popup__label\">\r\n        <input\r\n          defaultValue={name}\r\n          onChange={handleChangeName}\r\n          placeholder=\"Имя\"\r\n          type=\"text\"\r\n          name=\"name\"\r\n          className=\"popup__input popup__input_name\"\r\n          minLength=\"2\"\r\n          maxLength=\"40\"\r\n          required\r\n        />\r\n        <span className=\"popup__error\" id=\"name-error\"></span>\r\n      </label>\r\n\r\n      <label className=\"popup__label\">\r\n        <input\r\n          defaultValue={description}\r\n          onChange={handleChangeDescription}\r\n          placeholder=\"Занятие\"\r\n          type=\"text\"\r\n          name=\"about\"\r\n          minLength=\"2\"\r\n          maxLength=\"200\"\r\n          className=\"popup__input popup__input_profession\"\r\n          required\r\n        />\r\n        <span className=\"popup__error\" id=\"about-error\"></span>\r\n      </label>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nexport default function AddPlacePopup({ isOpen, onClose, onAddPlace }) {\r\n  const nameRef = React.useRef();\r\n  const linkRef = React.useRef();\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onAddPlace(\r\n      {\r\n        link: linkRef.current.value,\r\n        name: nameRef.current.value,\r\n      },\r\n      () => {\r\n        linkRef.current.value = \"\";\r\n        nameRef.current.value = \"\";\r\n      }\r\n    );\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      onSubmit={handleSubmit}\r\n      title={\"Новое место\"}\r\n      name={\"add\"}\r\n      btnValue={\"Создать\"}\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n    >\r\n      <label className=\"popup__label\">\r\n        <input\r\n          ref={nameRef}\r\n          type=\"text\"\r\n          name=\"name\"\r\n          minLength=\"1\"\r\n          maxLength=\"30\"\r\n          className=\"popup__input popup__input_title\"\r\n          placeholder=\"Название\"\r\n          required\r\n        />\r\n        <span className=\"popup__error\" id=\"name-error\"></span>\r\n      </label>\r\n\r\n      <label className=\"popup__label\">\r\n        <input\r\n          ref={linkRef}\r\n          type=\"url\"\r\n          name=\"link\"\r\n          className=\"popup__input popup__input_link\"\r\n          placeholder=\"Ссылка на картинку\"\r\n          required\r\n        />\r\n        <span className=\"popup__error\" id=\"link-error\"></span>\r\n      </label>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nexport default function EditAvatarPopup({ isOpen, onClose, onUpdateAvatar }) {\r\n  const urlRef = React.useRef();\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n\r\n    onUpdateAvatar(\r\n      {\r\n        avatar: urlRef.current.value,\r\n      },\r\n      () => {\r\n        urlRef.current.value = \"\";\r\n      }\r\n    );\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      onSubmit={handleSubmit}\r\n      name={\"avatar\"}\r\n      title={\"Обновить аватар\"}\r\n      btnValue={\"Сохранить\"}\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n    >\r\n      <label className=\"popup__label\">\r\n        <input\r\n          ref={urlRef}\r\n          type=\"url\"\r\n          name=\"avatar\"\r\n          className=\"popup__input popup__input_link\"\r\n          placeholder=\"Ссылка на аватар\"\r\n          required\r\n        />\r\n        <span className=\"popup__error\" id=\"avatar-error\"></span>\r\n      </label>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport successImage from \"../images/Union.svg\";\r\nimport failImage from \"../images/Fail.svg\";\r\n\r\nexport default function InfoTooltip({ isOpen, onClose, sucess, message }) {\r\n  return (\r\n    <div className={isOpen ? \"popup popup_opened\" : \"popup\"}>\r\n      <form action=\"#\" method=\"POST\" className=\"popup__form\" noValidate>\r\n        <img src={sucess ? successImage : failImage} alt={message} className=\"popup-image\" />\r\n        <p className=\"popup-caption\">{message}</p>\r\n        <button type=\"reset\" className=\"popup__button-close\" onClick={onClose}></button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport logo from \"../images/logo.svg\";\r\nimport { Link, Route } from \"react-router-dom\";\r\n\r\nexport default function Header({ email, onSignOut }) {\r\n  return (\r\n    <header className=\"header\">\r\n      <img src={logo} alt=\"Логотип Mesto\" className=\"header__logo\" />\r\n      <Route path=\"/home\">\r\n        <p className=\"header__email\">\r\n          {email}\r\n          <Link\r\n            className=\"header__button header__button-grey header__button_type_visible\"\r\n            to=\"/signin\"\r\n            onClick={onSignOut}\r\n          >\r\n            Выйти\r\n          </Link>\r\n        </p>\r\n      </Route>\r\n      <Route path=\"/signin\">\r\n        <Link className=\"header__button header__button_type_visible\" to=\"/signup\">\r\n          Регистрация\r\n        </Link>\r\n      </Route>\r\n      <Route path=\"/signup\">\r\n        <Link className=\"header__button header__button_type_visible\" to=\"/signin\">\r\n          Войти\r\n        </Link>\r\n      </Route>\r\n    </header>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\n\r\nexport default function Card({ onCardDelete, onCardLike, onCardClick, card }) {\r\n  function handleCard() {\r\n    onCardClick(card);\r\n  }\r\n\r\n  function handleLikeClick() {\r\n    onCardLike(card);\r\n  }\r\n\r\n  function handleDeleteClick() {\r\n    onCardDelete(card);\r\n  }\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n  const isOwn = card.owner._id === currentUser._id;\r\n  const isLiked = card.likes.some((i) => i._id === currentUser._id);\r\n\r\n  return (\r\n    <li className=\"cards__list-item\">\r\n      <img onClick={handleCard} src={card.link} alt=\"\" className=\"card__image\" />\r\n      <h2 className=\"card__caption\">{card.name}</h2>\r\n      <div className=\"card__like-container\">\r\n        <button\r\n          onClick={handleLikeClick}\r\n          type=\"button\"\r\n          className={`card__button-like ${\r\n            isLiked ? \"card__button-like_active\" : \"card__button-like_disable\"\r\n          }`}\r\n        ></button>\r\n        <span className=\"like__counter\">{card.likes.length}</span>\r\n      </div>\r\n\r\n      <button\r\n        onClick={handleDeleteClick}\r\n        type=\"button\"\r\n        className={isOwn ? \"card__delete\" : \"card__delete_hidden\"}\r\n      ></button>\r\n    </li>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\nimport Card from \"../components/Card\";\r\n\r\nexport default function Main({\r\n  onCardClick,\r\n  onEditProfile,\r\n  onAddPlace,\r\n  onEditAvatar,\r\n  cards,\r\n  onCardLike,\r\n  onCardDelete,\r\n}) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  return (\r\n    <main className=\"content\">\r\n      <section className=\"profile\">\r\n        <div className=\"profile__overlay\" onClick={onEditAvatar}>\r\n          <img src={currentUser.avatar} alt=\"Аватар\" className=\"profile__avatar\" />\r\n        </div>\r\n        <div className=\"profile__info\">\r\n          <h1 className=\"profile__title\">{currentUser.name}</h1>\r\n          <button\r\n            onClick={onEditProfile}\r\n            type=\"button\"\r\n            className=\"profile__button profile__button_edit\"\r\n          ></button>\r\n          <p className=\"profile__subtitle\">{currentUser.about}</p>\r\n        </div>\r\n\r\n        <button\r\n          onClick={onAddPlace}\r\n          type=\"button\"\r\n          className=\"profile__button profile__button_add\"\r\n        ></button>\r\n      </section>\r\n\r\n      <section className=\"cards\">\r\n        <ul className=\"cards__list\">\r\n          {cards.map((card) => (\r\n            <Card\r\n              onCardDelete={onCardDelete}\r\n              onCardLike={onCardLike}\r\n              onCardClick={onCardClick}\r\n              card={card}\r\n              key={card._id}\r\n            />\r\n          ))}\r\n        </ul>\r\n      </section>\r\n    </main>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nexport default function Footer() {\r\n  return (\r\n    <footer className=\"footer\">\r\n      <p className=\"footer__copyright\">&copy; Mesto Russia</p>\r\n    </footer>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nexport default function ImagePopup({ card, onClose }) {\r\n  return (\r\n    <div className={`popup popup_type_open-image ${card.link && \"popup_opened\"}`}>\r\n      <div className=\"popup__container\">\r\n        <figure className=\"popup__card-contain\">\r\n          <img src={card.link} alt=\"\" className=\"popup__image\" />\r\n          <figcaption className=\"popup__caption\">{card.name}</figcaption>\r\n        </figure>\r\n\r\n        <button type=\"button\" className=\"popup__button-close\" onClick={onClose}></button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nexport default function Login({ onLogin }) {\r\n  const [data, setData] = React.useState({ password: \"\", email: \"\" });\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setData({\r\n      ...data,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    const { password, email } = data;\r\n    onLogin(password, email);\r\n  };\r\n\r\n  return (\r\n    <div className=\"login\">\r\n      <form\r\n        action=\"#\"\r\n        method=\"POST\"\r\n        className=\"popup__form popup__form_type_login\"\r\n        noValidate\r\n        onSubmit={handleSubmit}\r\n      >\r\n        <h2 className=\"popup__title popup__title_type_login\">Вход</h2>\r\n        <label className=\"popup__label\">\r\n          <input\r\n            placeholder=\"Email\"\r\n            type=\"email\"\r\n            name=\"email\"\r\n            className=\"popup__input popup__input_type_login\"\r\n            minLength=\"2\"\r\n            maxLength=\"40\"\r\n            required\r\n            onChange={handleChange}\r\n          />\r\n          <span className=\"popup__error\" id=\"name-error\"></span>\r\n        </label>\r\n\r\n        <label className=\"popup__label\">\r\n          <input\r\n            placeholder=\"Пароль\"\r\n            type=\"password\"\r\n            name=\"password\"\r\n            minLength=\"2\"\r\n            maxLength=\"200\"\r\n            className=\"popup__input popup__input_type_login\"\r\n            required\r\n            onChange={handleChange}\r\n          />\r\n          <span className=\"popup__error\" id=\"about-error\"></span>\r\n        </label>\r\n\r\n        <button type=\"submit\" value=\"\" className=\"popup__button_type_login\">\r\n          Войти\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport default function Register({ onRegister }) {\r\n  const [data, setData] = React.useState({ password: \"\", email: \"\" });\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setData({\r\n      ...data,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    const { password, email } = data;\r\n    onRegister(password, email);\r\n  };\r\n\r\n  return (\r\n    <div className=\"login\">\r\n      <form\r\n        action=\"#\"\r\n        method=\"POST\"\r\n        className=\"popup__form popup__form_type_login\"\r\n        noValidate\r\n        onSubmit={handleSubmit}\r\n      >\r\n        <h2 className=\"popup__title popup__title_type_login\">Регистрация</h2>\r\n        <label className=\"popup__label\">\r\n          <input\r\n            placeholder=\"Email\"\r\n            type=\"email\"\r\n            name=\"email\"\r\n            className=\"popup__input popup__input_type_login\"\r\n            required\r\n            onChange={handleChange}\r\n          />\r\n          <span className=\"popup__error\" id=\"name-error\"></span>\r\n        </label>\r\n\r\n        <label className=\"popup__label\">\r\n          <input\r\n            placeholder=\"Пароль\"\r\n            type=\"password\"\r\n            name=\"password\"\r\n            className=\"popup__input popup__input_type_login\"\r\n            required\r\n            onChange={handleChange}\r\n          />\r\n          <span className=\"popup__error\" id=\"about-error\"></span>\r\n        </label>\r\n\r\n        <button type=\"submit\" value=\"\" className=\"popup__button_type_login\">\r\n          Зарегистрироваться\r\n        </button>\r\n        <span className=\"login__button\">\r\n          Уже зарегистрированы?{\" \"}\r\n          <Link className=\"login__button\" to=\"/signin\">\r\n            Войти\r\n          </Link>\r\n        </span>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n","export class Api {\r\n  constructor(config) {\r\n    this._url = config.url;\r\n    this._headers = config.headers;\r\n  }\r\n\r\n  getAllCardsList() {\r\n    return fetch(this._url, {\r\n      method: \"GET\",\r\n      headers: this._headers,\r\n    }).then((res) => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    });\r\n  }\r\n\r\n  addCard({link, name}) {\r\n    return fetch(this._url, {\r\n      method: \"POST\",\r\n      headers: this._headers,\r\n      body: JSON.stringify({ link: link, name: name }),\r\n    }).then((res) => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    });\r\n  }\r\n\r\n  getUserData() {\r\n    return fetch('https://mesto.nomoreparties.co/v1/cohort-15/users/me', {\r\n      method: \"GET\",\r\n      headers: this._headers,\r\n    }).then((res) => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    });\r\n  }\r\n\r\n  changeUserData({name, about}) {\r\n    return fetch('https://mesto.nomoreparties.co/v1/cohort-15/users/me', {\r\n      method: \"PATCH\",\r\n      headers: this._headers,\r\n      body: JSON.stringify({name: name, about: about}),\r\n    }).then((res) => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    });\r\n  }\r\n\r\n  changeUserAvatar({avatar}) {\r\n    return fetch('https://mesto.nomoreparties.co/v1/cohort-15/users/me/avatar', {\r\n      method: \"PATCH\",\r\n      headers: this._headers,\r\n      body: JSON.stringify({avatar: avatar}),\r\n    }).then((res) => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    });\r\n  }\r\n\r\n  deleteCard(id) {\r\n    return fetch(`https://mesto.nomoreparties.co/v1/cohort-15/cards/${id}`, {\r\n      method: \"DELETE\",\r\n      headers: this._headers,\r\n    }).then((res) => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    });\r\n  }\r\n\r\n  changeLikeCard(id, isLiked) {\r\n    if(isLiked) {\r\n      return fetch(`https://mesto.nomoreparties.co/v1/cohort-15/cards/likes/${id}`, {\r\n      method: \"PUT\",\r\n      headers: this._headers,\r\n    }).then((res) => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    });\r\n    } else {\r\n      return fetch(`https://mesto.nomoreparties.co/v1/cohort-15/cards/likes/${id}`, {\r\n      method: \"DELETE\",\r\n      headers: this._headers,\r\n    }).then((res) => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    });\r\n  }\r\n}\r\n  \r\n\r\n  /*addLikeCard(id) {\r\n    return fetch(`https://mesto.nomoreparties.co/v1/cohort-15/cards/likes/${id}`, {\r\n      method: \"PUT\",\r\n      headers: this._headers,\r\n    }).then((res) => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    });\r\n  }\r\n\r\n  deleteLikeCard(id) {\r\n    return fetch(`https://mesto.nomoreparties.co/v1/cohort-15/cards/likes/${id}`, {\r\n      method: \"DELETE\",\r\n      headers: this._headers,\r\n    }).then((res) => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    });\r\n  }*/\r\n}\r\n\r\nconst api = new Api({\r\n  // Экземпляр класса АПИ\r\n  url: \"https://mesto.nomoreparties.co/v1/cohort-15/cards\",\r\n  headers: {\r\n    authorization: \"a0bff86e-f64d-4da1-b51a-ea82a126a932\",\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n});\r\n\r\nexport default api;\r\n","export const BASE_URL = \"https://auth.nomoreparties.co\";\r\n\r\nexport const register = (password, email) => {\r\n  return fetch(`${BASE_URL}/signup`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify({ password: password, email: email }),\r\n  }).then((res) => {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }\r\n\r\n    return Promise.reject(`Ошибка: ${res.status}`);\r\n  });\r\n};\r\n\r\nexport const login = (password, email) => {\r\n  return fetch(`${BASE_URL}/signin`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify({ password: password, email: email }),\r\n  }).then((res) => {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }\r\n\r\n    return Promise.reject(`Ошибка: ${res.status}`);\r\n  });\r\n};\r\n\r\nexport const getContent = (token) => {\r\n  return fetch(`${BASE_URL}/users/me`, {\r\n    method: \"GET\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n      \"Authorization\" : `Bearer ${token}`\r\n    }\r\n  }).then((res) => {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }\r\n\r\n    return Promise.reject(`Ошибка: ${res.status}`);\r\n  });\r\n}","import React from \"react\";\nimport ProtectedRoute from \"./ProtectedRoute\";\nimport { Route, Switch, Redirect, useHistory } from \"react-router-dom\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\nimport EditProfilePopup from \"./EditProfilePopup\";\nimport AddPlacePopup from \"./AddPlacePopup\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport InfoTooltip from \"./InfoTooltip\";\nimport Header from \"./Header\";\nimport Main from \"./Main\";\nimport Footer from \"./Footer\";\nimport PopupWithForm from \"./PopupWithForm\";\nimport ImagePopup from \"./ImagePopup\";\nimport Login from \"./Login\";\nimport Register from \"./Register\";\nimport api from \"../utils/Api.js\";\nimport * as auth from \"../utils/auth.js\";\n\nfunction App() {\n  /* Авторизация/регистрация */\n  const [loggedIn, setLoggedIn] = React.useState(false);\n  const [userData, setUserData] = React.useState({});\n  const [email, setEmail] = React.useState(false);\n  const history = useHistory();\n\n  React.useEffect(() => {\n    tokenCheck();\n  }, []);\n\n  const handleRegister = (password, email) => {\n    auth\n      .register(password, email)\n      .then((data) => {\n        if (data.data.email) {\n          history.push(\"/signin\");\n          setEmail(true);\n        }\n      })\n      .catch((err) => {\n        setEmail(false);\n        console.log(err);\n      })\n      .finally(() => {\n        setInfoTooltipOpen(true);\n      });\n  };\n\n  const handleLogin = (password, email) => {\n    console.log(password, email);\n    setUserData({ email: email });\n    auth\n      .login(password, email)\n      .then((data) => {\n        if (data.token) {\n          localStorage.setItem(\"jwt\", data.token);\n          setLoggedIn(true);\n          history.push(\"/home\");\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  };\n\n  const tokenCheck = () => {\n    const jwt = localStorage.getItem(\"jwt\");\n    if (jwt) {\n      auth.getContent(jwt).then((res) => {\n        if (res) {\n          console.log(res);\n          setUserData({\n            email: res.data.email,\n          });\n          setLoggedIn(true);\n        }\n      });\n    }\n  };\n\n  const signOut = () => {\n    localStorage.removeItem(\"jwt\");\n    setUserData([]);\n    setLoggedIn(false);\n    history.push(\"/signin\");\n  };\n\n  const [infoTooltipOpen, setInfoTooltipOpen] = React.useState(false);\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n  const [selectedCard, setSelectedCard] = React.useState({});\n  const [currentUser, setCurrentUser] = React.useState({});\n  const [cards, setCards] = React.useState([]);\n\n  React.useEffect(() => {\n    Promise.all([api.getUserData(), api.getAllCardsList()])\n      .then((res) => {\n        const [dataUser, cardData] = res;\n\n        setCurrentUser(dataUser);\n\n        const item = cardData.map((cardEl) => ({\n          link: cardEl.link,\n          name: cardEl.name,\n          likes: cardEl.likes,\n          _id: cardEl._id,\n          owner: cardEl.owner,\n        }));\n\n        setCards(item);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }, []);\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some((i) => i._id === currentUser._id);\n    api\n      .changeLikeCard(card._id, !isLiked)\n      .then((newCard) => {\n        // Формируем новый массив на основе имеющегося, подставляя в него новую карточку\n        const newCards = cards.map((cardItem) => (cardItem._id === card._id ? newCard : cardItem));\n        setCards(newCards);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  function handleCardDelete(card) {\n    api\n      .deleteCard(card._id)\n      .then((res) => {\n        const newCardArr = cards.filter((cardEl) => cardEl._id !== card._id);\n        setCards(newCardArr);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  function handleAddPlaceSubmit(newCard, clearForm) {\n    api\n      .addCard(newCard)\n      .then((newCard) => {\n        setCards([newCard, ...cards]);\n        setIsAddPlacePopupOpen(false);\n        clearForm();\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  function handleUpdateUser(userData) {\n    api\n      .changeUserData(userData)\n      .then((userData) => {\n        setCurrentUser(userData);\n        setIsEditProfilePopupOpen(false);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  function handleUpdateAvatar(userData, clearForm) {\n    api\n      .changeUserAvatar(userData)\n      .then((userData) => {\n        setCurrentUser(userData);\n        setIsEditAvatarPopupOpen(false);\n        clearForm();\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  function handleCardClick(card) {\n    setSelectedCard(card);\n  }\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n  }\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true);\n  }\n\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true);\n  }\n\n  function closeAllPopup() {\n    setInfoTooltipOpen(false);\n    setSelectedCard(false);\n    setIsEditProfilePopupOpen(false);\n    setIsEditAvatarPopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n  }\n\n  return (\n    <div className=\"page\">\n      <Header email={userData.email} onSignOut={signOut} loggedIn={loggedIn} />\n\n      <Switch>\n        <CurrentUserContext.Provider value={currentUser}>\n          <ProtectedRoute\n            path=\"/home\"\n            loggedIn={loggedIn}\n            component={Main}\n            onCardClick={handleCardClick}\n            onEditAvatar={handleEditAvatarClick}\n            onEditProfile={handleEditProfileClick}\n            onAddPlace={handleAddPlaceClick}\n            cards={cards}\n            onCardLike={handleCardLike}\n            onCardDelete={handleCardDelete}\n          ></ProtectedRoute>\n\n          <Route path=\"/signin\">\n            <Login onLogin={handleLogin} />\n          </Route>\n\n          <Route path=\"/signup\">\n            <Register onRegister={handleRegister} />\n          </Route>\n\n          <Route>{loggedIn ? <Redirect to=\"/home\" /> : <Redirect to=\"/signin\" />}</Route>\n          <InfoTooltip\n            isOpen={infoTooltipOpen}\n            onClose={closeAllPopup}\n            sucess={email}\n            message={\n              email ? \"Вы успешно зарегистрировались!\" : \"Что-то пошло не так! Попробуйте ещё раз.\"\n            }\n          />\n          <EditProfilePopup\n            isOpen={isEditProfilePopupOpen}\n            onClose={closeAllPopup}\n            onUpdateUser={handleUpdateUser}\n          />\n\n          <AddPlacePopup\n            isOpen={isAddPlacePopupOpen}\n            onClose={closeAllPopup}\n            onAddPlace={handleAddPlaceSubmit}\n          />\n\n          <EditAvatarPopup\n            isOpen={isEditAvatarPopupOpen}\n            onClose={closeAllPopup}\n            onUpdateAvatar={handleUpdateAvatar}\n          />\n\n          <PopupWithForm\n            name={\"confirm\"}\n            title={\"Вы уверены?\"}\n            btnValue={\"Да\"}\n            onClose={closeAllPopup}\n          ></PopupWithForm>\n\n          <ImagePopup card={selectedCard} onClose={closeAllPopup} />\n        </CurrentUserContext.Provider>\n      </Switch>\n      <Footer />\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport \"./index.css\";\nimport App from \"./components/App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}